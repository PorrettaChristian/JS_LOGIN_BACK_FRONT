<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    </head>
    <body>  
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <div class=".container-fluid">
            <h1>LOGIN IN IN</h1>
            <label for="floatingInput">inserire mail:</label>    
            <input type="text" id="mail" placeholder="email" />
               
            <!-- inserire mail:
            <input type="text" id="mail" placeholder="email" /> -->
            inserire password:
            <input type="password" id="psw" placeholder="password" />
            <button id="b1" class="btn btn-dark">invia</button>
            <br><br><br>
            <h1>REGISTRAZIONE</h1>
            inserire mail:
            <input type="text" id="mail1" placeholder="email" />
            inserire password:
            <input type="password" id="psw1" placeholder="password" />
            <button id="b2" class="btn btn-dark">invia</button>
        </div>
        <script>
            $("#b1").click(function(){
                let mail = $("#mail").val();
                let psw = $("#psw").val();
                if (mail && psw) {
                    console.log($("#mail").val());
                    console.log($("#psw").val());
                    $.ajax(
                        {
                            url: ("http://localhost:5000/api/login?mail="+mail+"&psw="+psw),
                            method: "GET",
                            success: function(data){
                                console.log("success: ",data)
                                $("body").attr("style", "background-color: green");
                                window.localStorage.setItem("id_user", data.id);
                                window.location.replace("home.html"); //replace rimuove la storia della navigazione, cioe una volta andata nella pagina home non va piu la freccettina per andare idnietro
                            },
                            error: function(data){
                                $("body").attr("style", "background-color: red");
                                console.log("error: ",data)
                            }
                        }
                    )
                } else {
                    console.log("nessun valore")  
                }  
            });
            $("#b2").click(function(){
                let mail = $("#mail1").val();
                let psw = $("#psw1").val();
                if (mail && psw) {
                    console.log($("#mail").val());
                    console.log($("#psw").val());
                    $.ajax(
                        {
                            url: ("http://localhost:5000/api/reg?mail="+mail+"&psw="+psw),
                            method: "GET",
                            success: function(data){
                                console.log("success: ",data)
                                $("body").attr("style", "background-color: green");
                            },
                            error: function(data){
                                $("body").attr("style", "background-color: red");
                                console.log("error: ",data)
                            }
                        }
                    )
                } else {
                    console.log("nessun valore")  
                }  
            });
        </script>
        <script 
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" 
            crossorigin="anonymous">
        </script>
    </body>
</html>